# 查询模块调用说明

本文档介绍 `backend/src/query` 模块的主要函数以及如何在项目中调用它们。

## 模块概览
- `query_database_info(logger=None)`: 读取配置中定义的数据库连接，遍历所有可用数据库，统计每张表的记录数，并在可能时附带前五行数据预览。
- `run_query(logger=None)`: 查询模块的对外入口。负责初始化日志、调用 `query_database_info` 并包装返回结果或错误信息。

## 依赖前提
1. 在 `settings` 中配置 `databases.db_url`，指向可访问的 MySQL 数据库。
2. 项目需安装 `pandas` 和 `SQLAlchemy` 等依赖（见 `backend/requirements.txt`）。
3. 推荐传入项目统一的 logger，否则模块会自动创建一个默认的 info 级别 logger。

## 调用示例
```python
from backend.src.query import run_query

result = run_query()
if result.get("summary"):
    print("共发现", result["summary"]["database_count"], "个数据库")
else:
    print("查询失败", result)
```

也可以在已有 logger 场景下直接调用底层的 `query_database_info(logger)` 以便在上层自定义错误处理逻辑。
